package com.scb.Payment.Initiation.service;

import com.scb.Payment.Initiation.entity.Transactions;
import com.scb.Payment.Initiation.repository.TransactionRepo;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class TransactionService {

    private final TransactionRepo  transactionRepo;

    public TransactionService(TransactionRepo transactionRepo) {
        this.transactionRepo = transactionRepo;
    }

    public List<Transactions> getAllTransactions() {
        return transactionRepo.findAll();
    }

    public Transactions getTransactionById(Integer id) {
        return transactionRepo.findById(id).orElse(null);
    }

    public Transactions createTransaction(Transactions transaction) {
        return transactionRepo.save(transaction);
    }

    public Transactions updateTransaction(Integer id, Transactions updatedTransaction) {
        return transactionRepo.findById(id)
                .map(transaction -> {
                    transaction.setReferenceNo(updatedTransaction.getReferenceNo());
                    transaction.setBeneficiary(updatedTransaction.getBeneficiary());
                    transaction.setCompanyName(updatedTransaction.getCompanyName());
                    transaction.setValueDate(updatedTransaction.getValueDate());
                    transaction.setAmount(updatedTransaction.getAmount());
                    transaction.setStatus(updatedTransaction.getStatus());
                    transaction.setPaymentMethod(updatedTransaction.getPaymentMethod());
                    transaction.setPayeeBankBranch(updatedTransaction.getPayeeBankBranch());
                    transaction.setPayeeBankAddress(updatedTransaction.getPayeeBankAddress());
                    transaction.setBatchId(updatedTransaction.getBatchId());
                    return transactionRepo.save(transaction);
                })
                .orElse(null);
    }

    public void deleteTransaction(Integer id) {
        transactionRepo.deleteById(id);
    }
}
